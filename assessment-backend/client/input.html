<!DOCTYPE html>
<html>

<head>
    <title>INPUT PAGE</title>
    <link rel="stylesheet" href="input.css">
    <div class="dropdown">
        <button class="dropbtn">Menu</button>
        <div class="dropdown-content">
            <a href="./index.html">INDEX</a>
            <a href="./input.html">WALL</a>
        </div>
    </div>
</head>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- <script src='assessment-backend/server/index.js'></script> -->
<!-- <body class="container"> -->
<body>

    <main>
        <h1>
            <p style="background-color:yellow;">OUR LOVELY WALL</p>
        </h1>
        <section>
            <form>
                <input placeholder='ADD SOME LOVE TO OUR WALL!' size=100 />
                <button>Submit</button>
            </form>
        </section>
        <ul>
        </ul>
        <aside id="message"></aside>
    </main>
    <!-- <script src='assessment-backend/server/index.js'></script> -->
    <!-- <script src="https://unpkg.com/axios/dist/axios.min.js%22%3E"></script> -->

    <!-- KEPT GETTING AXIOS IS NOT DEFINED ERROR. COULDNT TROUBLESHOOT -->
    <script>
        const body = {
            newInput: document.querySelector('input').value
        }

        axios.post('http://localhost:4003/api/input', body)
        .then(res => {
            // newInput.value = ''

            const listSection = document.querySelector('ul');
            listSection.innerHTML = '';

            // for(let i = 0; i < res.data.length; i++) {
            //   const newLi = document.createElement('li')

            //   newLi.textContent = res.data[i]

            //   listSection.appendChild(newLi)
            // }

          })
          .catch(err => console.log(err));


        // newInput.focus();

        document.querySelector("form").addEventListener("submit",addQuote);
const message = document.querySelector('#message')

function addQuote(event){
    event.preventDefault();
    let inputField = document.querySelector('input')
    
    const quote = document.createElement('li')
    
    const listQuote = document.createElement('span');
    listQuote.textContent = inputField.value;
    listQuote.addEventListener("click", crossOffQuote);
    quote.appendChild(listQuote);

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "x";
    deleteBtn.addEventListener("click", deleteQuote);
    quote.appendChild(deleteBtn);


    const list = document.querySelector("ul");
    list.appendChild(quote);

    message.textContent = `New quote added to the Wall.`
    revealMessage();

    inputField.value = ""
}


function deleteQuote(event){
    revealMessage();
    event.target.parentNode.remove();
}

function crossOffQuote(event){
    event.target.classList.toggle("checked")
    revealMessage();
}

function revealMessage() {
    message.classList.remove('hide')
    setTimeout(() => {
        message.classList.add('hide')
    }, 1000)
}


    </script>
</body>

</html>